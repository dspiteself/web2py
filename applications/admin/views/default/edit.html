{{extend 'layout.html'}}
<script language="Javascript" type="text/javascript" src="{{=URL(r=request,c='static',f='edit_area/edit_area_full.js')}}"></script><script language="Javascript" type="text/javascript">
editAreaLoader.init({id: "body",start_highlight: true,allow_resize: "both",allow_toggle: true,language: "en",syntax: "{{=filetype}}",replace_tab_by_spaces: 4});
</script>

<h1>Editing file "{{=filename}}"</h1>

{{if functions:}}
<div style="text-align:left;">exposes {{=XML(', '.join([A(f,_href=URL(a=app,c=controller,f=f)).xml() for f in functions]))}}</div>
{{pass}}

{{if edit_controller:}}
<div style="text-align:right;">[<a href="{{=edit_controller}}">edit controller</a>]</div>
{{pass}}

<br/><br/>

<form action="{{=URL(r=request,f='edit',args=filename)}}" method="post">
<input type="submit" value="save"/><br/>
<textarea cols="80" rows="25" id="body" style="width: 100%;" name="data">{{=data}}</textarea>
<input type="hidden" name="file_hash" value="{{=file_hash}}" />
<input type="submit" name="restore" value="restore" /><br/>
</form>

